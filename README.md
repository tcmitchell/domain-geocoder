# domain-geocoder
Turn domain names into latitude/longitude pairs

# Dependencies

On CentOS, install MaxMind DB per
[their installation instructions](https://github.com/maxmind/MaxMind-DB-Reader-python):

````
sudo yum install -y epel-release
sudo yum install -y python-pip
sudo pip install maxminddb
````

Clone this repository:

````
git clone https://github.com/tcmitchell/domain-geocoder
````

Install other dependencies via git:

````
cd domain-geocoder
git clone https://github.com/maxmind/GeoIP2-python.git
git clone https://github.com/google/ipaddr-py.git
````

# Data

Input data files are generated by database queries documented at:

* https://github.com/GENI-NSF/geni-ch/wiki/Database-Queries#all-institutions
* You can combine the two resulting files into a single file, referenced
  as `$DATA_FILE` below

The GeoLite2 city database is available for download from:

* http://dev.maxmind.com/geoip/geoip2/geolite2/
** Hint: you want the MMDB format Cities file
* Store this file in the domain-geocoder directory

# Run

```python
export PYTHONPATH=GeoIP2-python:ipaddr-py
./domain2geo $DATA_FILE > locations.csv
```

# Docs

For GeoIP2-python: http://geoip2.readthedocs.org/en/latest/
